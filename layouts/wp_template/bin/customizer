#!/usr/local/bin/php

<?php

    require_once __DIR__ . '/../inc/autoloader_register.php';

    require_once __DIR__ . '/../vendor/autoload.php';

    /**
     * ./customizer section generate
     *
     *  Type section page: optional
     *
     *  Section name: required
     *
     *  Section description: required
     *
     *  Is section optional?: optional
     *
     *  Type section mods separated by , : optional
     */

     $namespace = 'VirgilSecurity\Generator';
     $className = $namespace . '\\' . ucfirst($argv[1]);
     $method = ucfirst($argv[2]);

     $generator = new $className();

     $sectionPage = readline("Type section page (optional): ");

     $sectionName = false;
     $sectionDescription = false;

     while (!$sectionName) {
         $sectionName = readline("Section name: ");
     }

     while (!$sectionDescription) {
         $sectionDescription = readline("Section description: ");
     }

     $sectionMods = readline("Type section mods separated by ',' : ");

     $mods = array_map(
         function ($mod) {
             return trim($mod);
         },
         explode(',', $sectionMods)
     );

     call_user_func_array(
         [$generator, $method],
         [
             $sectionName,
             $sectionDescription,
             $mods,
             $sectionPage,
         ]
     );

?>
