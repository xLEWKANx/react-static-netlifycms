<h1 id="public-keys-management-api">Public Keys Management API</h1>
<p>PKI service is responsible for management of user&#39;s identities (like email, mobile, etc.) and corresponding public keys.</p>
<p>Service entities are: </p>
<ul>
<li>Account - represents the service customer. Top-level entity that aggregates all user&#39;s public keys. </li>
<li>Public Key - holds public key information for user&#39;s account and aggregates user identities related to this public key.</li>
<li>UserData - validated user information pieces that use public key to encrypt the data.</li>
</ul>
<p>Detailed endpoints information:</p>
<ul>
<li><a href="http://markdownpad.com">Public Keys Management</a></li>
<li><a href="">User Data Management</a></li>
<li><a href="">Search</a></li>
<li><a href="">Error Codes</a></li>
</ul>
<h2 id="public-keys-management">Public Keys Management</h2>
<ul>
<li><a href="#post-objectspublic-key-add-use-case">POST /objects/public-key (ADD use-case)</a></li>
<li><a href="#post-objectspublic-key-create-use-case">POST /objects/public-key (CREATE use-case)</a></li>
<li><a href="#get-objectspublic-keypublic-key-id">GET /objects/public-key/{public-key-id}</a></li>
</ul>
<p>Create <strong><code>Public Key</code></strong> endpoint has two different use-cases:</p>
<ul>
<li><strong><code>ADD</code></strong>. Creates <strong><code>Public Key</code></strong> for <strong><code>Account</code></strong> specified by <strong>account_id</strong> parameter. The authorization is <strong>NEEDED</strong> and <strong>account_id</strong> parameter required.</li>
<li><strong><code>CREATE</code></strong>. Creates new <strong><code>Public key</code></strong>. The authorization is <strong>NOT NEEDED</strong> and <strong>account_id</strong> parameter is omitted.</li>
</ul>
<p><strong>user_data</strong> parameter is optional when <strong><code>Public Key</code></strong> get created.</p>
<h2 id="post-objects-public-key-add-use-case-">POST /objects/public-key (ADD use-case)</h2>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">POST</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/public-key</span>
Authorization          Needed
Parameters             public_key - base64 encoded <span class="hljs-keyword">public</span> key string
</code></pre><p>Request body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"30a7e1b3-e763-4789-a54d-fcc53dcf973a"</span></span>,
    "<span class="hljs-attribute">public_key</span>": <span class="hljs-value"><span class="hljs-string">"BASE64-ENCODED-STRING"</span></span>,
    "<span class="hljs-attribute">user_data</span>": <span class="hljs-value">[                                             
        {
            "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"email"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"user@virgilsecurity.com"</span>
        </span>},
        {
            "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
            "<span class="hljs-attribute">type</span>" : <span class="hljs-value"><span class="hljs-string">"domain"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"helpdsk.virgilsecurity.com"</span>
        </span>},
    ]</span>,
    "<span class="hljs-attribute">guid</span>": <span class="hljs-value"><span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>
</span>}
</code></pre>
<p>Response body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">id</span>" : <span class="hljs-value">{
        "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"3a768eea-cbda-4926-a82d-831cb89092aa"</span></span>,
        "<span class="hljs-attribute">public_key_id</span>": <span class="hljs-value"><span class="hljs-string">"17084b40-08f5-4bcd-a739-c0d08c176bad"</span>
    </span>}</span>,
    "<span class="hljs-attribute">public_key</span>": <span class="hljs-value"><span class="hljs-string">"BASE64-ENCODED-STRING"</span></span>,
    "<span class="hljs-attribute">user_data</span>": <span class="hljs-value">[]
</span>}
</code></pre>
<p>Request sample</p>
<pre><code>curl -v -X POST https://pki.virgilsecurity.com/objects/<span class="hljs-keyword">public</span>-key --data '{<span class="hljs-string">"account_id"</span>: <span class="hljs-string">"30a7e1b3-e763-4789-a54d-fcc53dcf973a"</span>, <span class="hljs-string">"public_key"</span> : <span class="hljs-string">"BASE64-ENCODED-STRING"</span>, <span class="hljs-string">"guid"</span>: <span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>}'
</code></pre><h2 id="post-objects-public-key-create-use-case-">POST /objects/public-key (CREATE use-case)</h2>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">POST</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/public-key</span>
Authorization          <span class="hljs-keyword">Not</span> Needed
</code></pre><p>Request body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">public_key</span>": <span class="hljs-value"><span class="hljs-string">"BASE64-ENCODED-STRING"</span></span>,
    "<span class="hljs-attribute">user_data</span>": <span class="hljs-value">[                                              
        {
            "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"email"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"user@virgilsecurity.com"</span>
        </span>},
        {
            "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"application"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"helpdesk.virgilsecurity.com"</span>
        </span>},
    ]</span>,
    "<span class="hljs-attribute">guid</span>": <span class="hljs-value"><span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>
</span>}
</code></pre>
<p>Response body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"3a768eea-cbda-4926-a82d-831cb89092aa"</span></span>,
        "<span class="hljs-attribute">public_key_id</span>": <span class="hljs-value"><span class="hljs-string">"17084b40-08f5-4bcd-a739-c0d08c176bad"</span>
    </span>}</span>,
    "<span class="hljs-attribute">public_key</span>": <span class="hljs-value"><span class="hljs-string">"BASE64-ENCODED-STRING"</span></span>,
    "<span class="hljs-attribute">user_data</span>": <span class="hljs-value">[]
</span>}
</code></pre>
<p>Request sample</p>
<pre><code>curl -v -X POST https://pki.virgilsecurity.com/objects/<span class="hljs-keyword">public</span>-key --data '{<span class="hljs-string">"public_key"</span> : <span class="hljs-string">"BASE64-ENCODED-STRING"</span>, <span class="hljs-string">"guid"</span>: <span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>}'
</code></pre><h2 id="get-objects-public-key-public-key-id-">GET /objects/public-key/{public-key-id}</h2>
<p>Retrieve the information on <strong><code>Public Key</code></strong> including all nested <strong><code>UserData</code></strong> items.</p>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">GET</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/public-key/{public-key-id}</span>
Authorization          <span class="hljs-keyword">Not</span> needed
</code></pre><p>Request body</p>
<pre><code><span class="hljs-deletion">-</span>
</code></pre><p>Response body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"d63a8ffd-bdac-498c-b861-a53e11989cef"</span></span>,
        "<span class="hljs-attribute">public-key_id</span>": <span class="hljs-value"><span class="hljs-string">"deb17e15-d47c-449f-b1b0-4d55247d153f"</span>
    </span>}</span>,
    "<span class="hljs-attribute">public_key</span>": <span class="hljs-value"><span class="hljs-string">"BASE64-ENCODED-STRING"</span></span>,
    "<span class="hljs-attribute">user_data</span>": <span class="hljs-value">[
        {
            "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"phone"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"+1 123 777 7777"</span></span>,
            "<span class="hljs-attribute">is_confirmed</span>": <span class="hljs-value"><span class="hljs-literal">false</span>
        </span>},
        {
            "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
            "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"email"</span></span>,
            "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"domenik.reve@virgilsecurity.com"</span></span>,
            "<span class="hljs-attribute">is_confirmed</span>": <span class="hljs-value"><span class="hljs-literal">true</span>
        </span>}
    ]
</span>}
</code></pre>
<p>Request sample</p>
<pre><code>curl -v -<span class="hljs-constant">X GET </span><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/pki.virgilsecurity.com/objects</span><span class="hljs-regexp">/public-key/</span><span class="hljs-number">6480</span>ba7a-<span class="hljs-number">1</span>b68-<span class="hljs-number">141</span>e-b547-ef8d9adc3145
</code></pre><h2 id="user-data-management">User Data Management</h2>
<ul>
<li><a href="#post-objectsuserdata">POST /objects/user-data</a></li>
<li><a href="#post-objectsuser-datauser-data-idactionsconfirm">POST /objects/user-data/{user-data-id}/actions/confirm</a></li>
<li><a href="#post-objectsuser-datauser-data-idactionsresend-confirmation">POST /objects/user-data/{user-data-id}/actions/resend-confirmation</a></li>
</ul>
<p>Available UserData class/type combinations are:</p>
<ul>
<li>user_id <pre><code class="lang-json">  <span class="hljs-string">"class"</span>: <span class="hljs-string">"user_id"</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"email"</span>,
  <span class="hljs-string">"value"</span>: <span class="hljs-string">"user<span class="hljs-variable">@virgilsecurity</span>.com"</span>
</code></pre>
<pre><code class="lang-json">  <span class="hljs-string">"class"</span>: <span class="hljs-string">"user_id"</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"domain"</span>,
  <span class="hljs-string">"value"</span>: <span class="hljs-string">"virgilsecurity.com"</span>
</code></pre>
</li>
<li>user_info<pre><code class="lang-json">  <span class="hljs-string">"class"</span>: <span class="hljs-string">"user_info"</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"first_name"</span>
  <span class="hljs-string">"value"</span>: <span class="hljs-string">"Bob"</span>
</code></pre>
<pre><code class="lang-json">  <span class="hljs-string">"class"</span>: <span class="hljs-string">"user_info"</span>,
  <span class="hljs-string">"type"</span>: <span class="hljs-string">"last_name"</span>
  <span class="hljs-string">"value"</span>: <span class="hljs-string">"Bobson"</span>
</code></pre>
</li>
</ul>
<h2 id="post-objects-user-data">POST /objects/user-data</h2>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">POST</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/user-data</span>
Authorization          Needed
</code></pre><p>Request body</p>
<pre><code class="lang-json">{
   "<span class="hljs-attribute">public_key_id</span>": <span class="hljs-value"><span class="hljs-string">"30a7e1b3-e763-4789-a54d-fcc53dcf973a"</span></span>,
   "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_info"</span></span>,
   "<span class="hljs-attribute">type</span>" : <span class="hljs-value"><span class="hljs-string">"last_name"</span></span>,
   "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"Maley"</span></span>,
   "<span class="hljs-attribute">guid</span>": <span class="hljs-value"><span class="hljs-string">"3a768eea-cbda-4926-a82d-831cb89092aa"</span>
</span>}
</code></pre>
<pre><code class="lang-json">{
   "<span class="hljs-attribute">public_key_id</span>": <span class="hljs-value"><span class="hljs-string">"30a7e1b3-e763-4789-a54d-fcc53dcf973a"</span></span>,
   "<span class="hljs-attribute">class</span>" : <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
   "<span class="hljs-attribute">type</span>" : <span class="hljs-value"><span class="hljs-string">"email"</span></span>,
   "<span class="hljs-attribute">value</span>" : <span class="hljs-value"><span class="hljs-string">"daniel.rehl@virgilsecurity.com"</span></span>,
   "<span class="hljs-attribute">guid</span>": <span class="hljs-value"><span class="hljs-string">"3a768eea-cbda-4926-a82d-831cb89092aa"</span>
</span>}
</code></pre>
<p>Response body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"3a768eea-cbda-4926-a82d-831cb89092aa"</span></span>,
        "<span class="hljs-attribute">public_key_id</span>": <span class="hljs-value"><span class="hljs-string">"17084b40-08f5-4bcd-a739-c0d08c176bad"</span></span>,
        "<span class="hljs-attribute">user_data_id</span>": <span class="hljs-value"><span class="hljs-string">"e33898de-6302-4756-8f0c-5f6c5218e02e"</span>
    </span>}</span>,
    "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"email"</span></span>,
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"daniel.rehl@vitgilsecurity.com"</span>
</span>}
</code></pre>
<p>Request sample</p>
<pre><code>curl -v -X POST https://pki.virgilsecurity.com/objects/<span class="hljs-literal">user</span>-data --data '{<span class="hljs-string">"public_key_id"</span>: <span class="hljs-string">"30a7e1b3-e763-4789-a54d-fcc53dcf973a"</span>, <span class="hljs-string">"class"</span>: <span class="hljs-string">"user_id"</span>, <span class="hljs-string">"type"</span>: <span class="hljs-string">"email"</span>, <span class="hljs-string">"value"</span>: <span class="hljs-string">"daniel.rehl@virgilsecurity.com"</span>, <span class="hljs-string">"guid"</span>: <span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>}'
</code></pre><h2 id="get-objects-user-data-user-data-id-">GET /objects/user-data/{user-data-id}</h2>
<p>Retrieve the information on <strong><code>UserData</code></strong>.</p>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">GET</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/user-data/{user-data-id}</span>
Authorization          <span class="hljs-keyword">Not</span> needed
</code></pre><p>Request body</p>
<pre><code><span class="hljs-deletion">-</span>
</code></pre><p>Response body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
        "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"e33898de-6302-4756-8f0c-5f6c5218e02e"</span></span>,
        "<span class="hljs-attribute">public_key_id</span>": <span class="hljs-value"><span class="hljs-string">"30a7e1b3-e763-4789-a54d-fcc53dcf973a"</span></span>,
        "<span class="hljs-attribute">user_data_id</span>": <span class="hljs-value"><span class="hljs-string">"cd171f7c-560d-4a62-8d65-16b87419a58c"</span>
    </span>}</span>,
    "<span class="hljs-attribute">class</span>": <span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
    "<span class="hljs-attribute">type</span>": <span class="hljs-value"><span class="hljs-string">"email"</span></span>,
    "<span class="hljs-attribute">value</span>": <span class="hljs-value"><span class="hljs-string">"user@virgilsecurity.com"</span>
</span>}
</code></pre>
<p>Request sample</p>
<pre><code>curl -v -<span class="hljs-constant">X GET </span><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/pki.virgilsecurity.com/objects</span><span class="hljs-regexp">/user-data/</span><span class="hljs-number">6480</span>ba7a-<span class="hljs-number">1</span>b68-<span class="hljs-number">141</span>e-b547-ef8d9adc3145
</code></pre><h2 id="post-objects-user-data-user-data-id-actions-confirm">POST /objects/user-data/{user-data-id}/actions/confirm</h2>
<p>Confirm <strong><code>UserData</code></strong> ownership by specifying the code received on registration</p>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">POST</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/user-data/{user-data-id}/actions/confirm</span>
Authorization          Needed
</code></pre><p>Request body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">code</span>": <span class="hljs-value"><span class="hljs-string">"F9U0W9"</span></span>,
    "<span class="hljs-attribute">guid</span>": <span class="hljs-value"><span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>
</span>}
</code></pre>
<p>Response body</p>
<pre><code><span class="hljs-deletion">-</span>
</code></pre><p>Request sample</p>
<pre><code>curl -v -X POST https://pki.virgilsecurity.com/objects/user-data/<span class="hljs-number">6480</span>ba7a-<span class="hljs-number">1</span>b68-<span class="hljs-number">141</span><span class="hljs-literal">e</span>-b547-ef8d9adc3145/actions/confirm --data '{<span class="hljs-string">"guid"</span>: <span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>, <span class="hljs-string">"code"</span>:<span class="hljs-string">"F9U0W9"</span>}'
</code></pre><h2 id="post-objects-user-data-user-data-id-actions-resend-confirmation">POST /objects/user-data/{user-data-id}/actions/resend-confirmation</h2>
<p>Resend the <strong><code>UserData</code></strong>&#39;s confirmation code</p>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">POST</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/user-data/{user-data-id}/actions/resend-confirmation</span>
Authorization          Needed
</code></pre><p>Request body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">guid</span>": <span class="hljs-value"><span class="hljs-string">"a53e98e4-0197-4513-be6d-49836e406aaa"</span>
</span>}
</code></pre>
<p>Response body</p>
<pre><code><span class="hljs-deletion">-</span>
</code></pre><p>Request sample</p>
<pre><code>curl -v -<span class="hljs-constant">X POST </span><span class="hljs-symbol">https:</span>/<span class="hljs-regexp">/pki.virgilsecurity.com/objects</span><span class="hljs-regexp">/user-data/</span><span class="hljs-number">6480</span>ba7a-<span class="hljs-number">1</span>b68-<span class="hljs-number">141</span>e-b547-ef8d9adc3145/actions/resend-confirmation --data <span class="hljs-string">'{"guid": "a53e98e4-0197-4513-be6d-49836e406aaa"}'</span>
</code></pre><h2 id="search">Search</h2>
<ul>
<li><a href="#post-objectsaccountactionssearch">POST /objects/account/actions/search </a></li>
<li><a href="#post-objectsuser-dataactionssearch">POST /objects/user-data/actions/search </a></li>
</ul>
<h2 id="post-objects-account-actions-search">POST /objects/account/actions/search</h2>
<p>Retrieve <strong><code>Account</code></strong> entity by user data specified</p>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>    <span class="hljs-title">POST</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>            <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/account/actions/search</span>
Authorization          <span class="hljs-keyword">Not</span> Needed
</code></pre><p>Request body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">email</span>": <span class="hljs-value"><span class="hljs-string">"test@test.com"</span>
</span>}
</code></pre>
<p>Response body</p>
<pre><code class="lang-json">[
    {
        "<span class="hljs-attribute">id</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"981d9537-3cc1-1236-6d63-8a7a608f572f"</span></span>,
        }</span>,
        "<span class="hljs-attribute">public_keys</span>":<span class="hljs-value">[
            {
                "<span class="hljs-attribute">id</span>":<span class="hljs-value">{
                    "<span class="hljs-attribute">account_id</span>": <span class="hljs-value"><span class="hljs-string">"dfb37d22-5995-bf14-46d8-0202a20f32de"</span></span>,
                    "<span class="hljs-attribute">public_key_id</span>": <span class="hljs-value"><span class="hljs-string">"75a152b8-022d-6137-3f1a-dc0353639fe8"</span>
                </span>}</span>,
                "<span class="hljs-attribute">public_key</span>":<span class="hljs-value"><span class="hljs-string">"tkjvnerovgboiej9u5gj4b0best"</span>
            </span>}
        ]
    </span>}
]
</code></pre>
<p>Request sample</p>
<pre><code><span class="hljs-title">curl</span> -v -X POST <span class="hljs-url">https://pki.virgilsecurity.com/objects/account/actions/search</span> --data <span class="hljs-string">'{"email": "test<span class="hljs-variable">@test</span>.com"}'</span>
</code></pre><h2 id="post-objects-user-data-actions-search">POST /objects/user-data/actions/search</h2>
<p>Retrieve <strong><code>UserData</code></strong> entity by value specified</p>
<p>Request info</p>
<pre><code>HTTP Request <span class="hljs-function"><span class="hljs-keyword">method</span>           <span class="hljs-title">POST</span>
<span class="hljs-title">Request</span> <span class="hljs-title">URL</span>                   <span class="hljs-title">https</span>:</span><span class="hljs-comment">//pki.virgilsecurity.com/objects/user-data/actions/search</span>
Authorization                 <span class="hljs-keyword">Not</span> Needed
Optional GET paramenters      ?expand=public_key
</code></pre><p>Request body</p>
<pre><code class="lang-json">{
    "<span class="hljs-attribute">email</span>": <span class="hljs-value"><span class="hljs-string">"user@virgilsecurity.com"</span>
</span>}
</code></pre>
<p>Response body without ?expand=public_key</p>
<pre><code class="lang-json">[
    {
        "<span class="hljs-attribute">id</span>":<span class="hljs-value">{
            "<span class="hljs-attribute">account_id</span>":<span class="hljs-value"><span class="hljs-string">"dfb37d22-5995-bf14-46d8-0202a20f32de"</span></span>,
            "<span class="hljs-attribute">public_key_id</span>":<span class="hljs-value"><span class="hljs-string">"75a152b8-022d-6137-3f1a-dc0353639fe8"</span></span>,
            "<span class="hljs-attribute">user_data_id</span>":<span class="hljs-value"><span class="hljs-string">"a4fc6c26-42fd-97bf-a054-0bc3341100c3"</span>
        </span>}</span>,
        "<span class="hljs-attribute">class</span>":<span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
        "<span class="hljs-attribute">type</span>":<span class="hljs-value"><span class="hljs-string">"email"</span></span>,
        "<span class="hljs-attribute">value</span>":<span class="hljs-value"><span class="hljs-string">"user@virgilsecurity.com"</span>
    </span>}
]
</code></pre>
<p>Response body with ?expand=public_key</p>
<pre><code class="lang-json">[
    {
        "<span class="hljs-attribute">id</span>":<span class="hljs-value">{
            "<span class="hljs-attribute">account_id</span>":<span class="hljs-value"><span class="hljs-string">"dfb37d22-5995-bf14-46d8-0202a20f32de"</span></span>,
            "<span class="hljs-attribute">public_key_id</span>":<span class="hljs-value"><span class="hljs-string">"75a152b8-022d-6137-3f1a-dc0353639fe8"</span></span>,
            "<span class="hljs-attribute">user_data_id</span>":<span class="hljs-value"><span class="hljs-string">"a4fc6c26-42fd-97bf-a054-0bc3341100c3"</span>
        </span>}</span>,
        "<span class="hljs-attribute">class</span>":<span class="hljs-value"><span class="hljs-string">"user_id"</span></span>,
        "<span class="hljs-attribute">type</span>":<span class="hljs-value"><span class="hljs-string">"email"</span></span>,
        "<span class="hljs-attribute">value</span>":<span class="hljs-value"><span class="hljs-string">"user@virgilsecurity.com"</span></span>,
        "<span class="hljs-attribute">expanded</span>": <span class="hljs-value">{
            "<span class="hljs-attribute">public_key</span>":<span class="hljs-value">{
                "<span class="hljs-attribute">id</span>":<span class="hljs-value">{
                    "<span class="hljs-attribute">account_id</span>":<span class="hljs-value"><span class="hljs-string">"dfb37d22-5995-bf14-46d8-0202a20f32de"</span></span>,
                    "<span class="hljs-attribute">public_key_id</span>":<span class="hljs-value"><span class="hljs-string">"75a152b8-022d-6137-3f1a-dc0353639fe8"</span>
                </span>}</span>,
                "<span class="hljs-attribute">public_key</span>":<span class="hljs-value"><span class="hljs-string">"tkjvnerovgboiej9u5gj4b0best"</span>
            </span>}
        </span>}
    </span>}
]
</code></pre>
<p>Request sample</p>
<pre><code>curl -<span class="hljs-keyword">v</span> -<span class="hljs-keyword">X</span> POST http<span class="hljs-variable">s:</span>//pki.virgilsecurity.<span class="hljs-keyword">com</span>/objects/user-data/actions/<span class="hljs-built_in">search</span>\?<span class="hljs-built_in">expand</span>\=public_key --data <span class="hljs-string">'{"email": "user@virgilsecurity.com"}'</span>
</code></pre><h2 id="error-codes">Error Codes</h2>
<p>Application uses standard HTTP response codes:</p>
<pre><code><span class="hljs-number">200</span> - Success
<span class="hljs-number">400</span> - Request error
<span class="hljs-number">401</span> - Authorization error
<span class="hljs-number">404</span> - Entity <span class="hljs-keyword">not</span> found
<span class="hljs-number">405</span> - <span class="hljs-function"><span class="hljs-keyword">Method</span> <span class="hljs-title">not</span> <span class="hljs-title">allowed</span>
500 - <span class="hljs-title">Server</span> <span class="hljs-title">error</span></span>
</code></pre><p>Addititional information about the error is returned as JSON-object like:</p>
<pre><code><span class="hljs-collection">{
    <span class="hljs-string">"error"</span>: <span class="hljs-collection">{
        <span class="hljs-string">"code"</span>: <span class="hljs-collection">{error-code}</span>
    }</span>
}</span>
</code></pre><p><strong><code>HTTP 500. Server error</code></strong> status is returned on internal application errors</p>
<pre><code><span class="hljs-number">10000</span> - Internal <span class="hljs-type">application</span> <span class="hljs-keyword">error</span>
<span class="hljs-number">10001</span> - Application kernel <span class="hljs-keyword">error</span>
<span class="hljs-number">10010</span> - Internal <span class="hljs-type">application</span> <span class="hljs-keyword">error</span>
<span class="hljs-number">10011</span> - Internal <span class="hljs-type">application</span> <span class="hljs-keyword">error</span>
<span class="hljs-number">10012</span> - Internal <span class="hljs-type">application</span> <span class="hljs-keyword">error</span>
<span class="hljs-number">10100</span> - JSON specified <span class="hljs-keyword">as</span> a request body <span class="hljs-keyword">is</span> invalid
</code></pre><p><strong><code>HTTP 401. Auth error</code></strong> status is returned on authorization errors</p>
<pre><code><span class="hljs-number">10200</span> - Guid specified <span class="hljs-keyword">is</span> expired already
<span class="hljs-number">10201</span> - The Guid specified <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">10202</span> - The Authorization header was <span class="hljs-keyword">not</span> specified
<span class="hljs-number">10203</span> - <span class="hljs-keyword">Public</span> <span class="hljs-keyword">key</span> header <span class="hljs-keyword">not</span> specified <span class="hljs-keyword">or</span> incorrect
<span class="hljs-number">10204</span> - The signed digest specified <span class="hljs-keyword">is</span> incorrect
</code></pre><p><strong><code>HTTP 400. Request error</code></strong> status is returned on request data validation errors</p>
<pre><code><span class="hljs-number">20000</span> - Account <span class="hljs-built_in">object</span> <span class="hljs-keyword">not</span> found <span class="hljs-keyword">for</span> id specified
<span class="hljs-number">20100</span> - <span class="hljs-keyword">Public</span> <span class="hljs-keyword">key</span> <span class="hljs-built_in">object</span> <span class="hljs-keyword">not</span> found <span class="hljs-keyword">for</span> id specified
<span class="hljs-number">20101</span> - <span class="hljs-keyword">Public</span> <span class="hljs-keyword">key</span> invalid
<span class="hljs-number">20102</span> - <span class="hljs-keyword">Public</span> <span class="hljs-keyword">key</span> <span class="hljs-keyword">not</span> specified
<span class="hljs-number">20103</span> - <span class="hljs-keyword">Public</span> <span class="hljs-keyword">key</span> must be base64-encoded <span class="hljs-built_in">string</span>
<span class="hljs-number">20200</span> - UserData <span class="hljs-built_in">object</span> <span class="hljs-keyword">not</span> found <span class="hljs-keyword">for</span> id specified
<span class="hljs-number">20201</span> - UserData type specified <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20202</span> - UserData type specified <span class="hljs-keyword">for</span> user identity <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20203</span> - Domain specified <span class="hljs-keyword">for</span> domain identity <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20204</span> - Email specified <span class="hljs-keyword">for</span> email identity <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20205</span> - Phone specified <span class="hljs-keyword">for</span> phone identity <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20206</span> - Fax specified <span class="hljs-keyword">for</span> fax identity <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20207</span> - Application specified <span class="hljs-keyword">for</span> application identity <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20208</span> - Mac address specified <span class="hljs-keyword">for</span> mac address identity <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20210</span> - UserData integrity constraint violation
<span class="hljs-number">20211</span> - UserData confirmation entity <span class="hljs-keyword">not</span> found <span class="hljs-keyword">by</span> code specified
<span class="hljs-number">20212</span> - UserData confirmation code invalid
<span class="hljs-number">20213</span> - UserData was already confirmed <span class="hljs-keyword">and</span> does <span class="hljs-keyword">not</span> need further confirmation
<span class="hljs-number">20214</span> - UserData <span class="hljs-keyword">class</span> specified <span class="hljs-keyword">is</span> invalid
<span class="hljs-number">20300</span> - User info data validation failed. Name <span class="hljs-keyword">is</span> invalid
</code></pre>